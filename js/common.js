$(document).on("ready",function(){function e(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer||e.target,o=t.files[0]||t.files[0],n=new FileReader;n.onload=function(e){return function(){var t=e.result;t.split("\n");$("#editor").editor("setValue",t)}}(n),n.readAsText(o),$(".drag-block").addClass("hidden")}function t(e){e.stopPropagation(),e.preventDefault(),$(".drag-block").removeClass("hidden"),$(".drag-block").appendTo("#editor"),e.dataTransfer.dropEffect="copy"}function o(e){e.stopPropagation(),e.preventDefault(),console.log(e.target),$(e.target).closest("#editor").length&&$(".drag-block").addClass("hidden")}function n(){var e=$(".select.active .add-input").offset(),t=$(".css-block .import").offset(),o=$(".timeline .empty-frame").eq(40).offset(),n=$(".edit-anim-el").offset(),s=$(".tab-css-props").offset();$(".tip1").css({left:e.left-120,top:e.top+30}),$(".tip2").css({left:t.left-200,top:t.top+50}),$(".tip3").css({left:o.left-120,top:o.top-80}),$(".tip4").css({left:n.left+90,top:n.top+40}),$(".tip5").css({left:s.left-50,top:s.top+35})}window.Keyframe=Keyframe;var s,i=($(document.body).width(),$(".v-border").width(),"<img src='img/logo.png' alt=''>\n<span>FIREFLY</span>"),a="<style>\n #anim-element{\n\tmargin:5px;\n\tposition: absolute;\n\tpadding: 5px;\n\tline-height: 1;\n\ttext-align: center;\n\twidth: 100px;\n\theight: 100px;\n\tcolor: #fff;\n\tbackground: #000;\n}\n#anim-element span{\n\tfont-weight: bold;\n\tfont-size: 18px;\n\t}\n</style>\n\n";setTimeout(function(){$("#editor").editor(),s=ace.edit("editor-el"),s.$blockScrolling=1/0,s.setTheme("ace/theme/monokai"),s.getSession().setMode("ace/mode/html"),s.setValue(a+i)},!1),jQuery("select").niceSelect(),$(".timeline").timeline(),$(".props-block").inputs();var c=!1;$(document).on("mousedown",".middle-border",function(e){c=!0}),$(document).on("mouseup",function(e){c=!1});var l;$(document).on("mousemove",".main-blocks",function(e){c&&e.pageX>400&&e.pageX<$(window).width()-400&&($(".props-block").css("width",e.pageX+"px"),$(".css-block").css("width",$(window).width()-e.pageX+"px")),l=e.pageX}),$(document).on("click","#anim-props .infinite",function(e){$(this).closest("#anim-props").find("#iterationCount").val("infinite").trigger("input")}),$(document).on("click",".props-block .tabs .tab",function(e){var t=$(this),o=t.data("target"),n=o.match(/.{1,}(?=-)/)[0];$("#"+o);$(".tabs .tab").removeClass("active"),t.addClass("active"),$(".tabs-content .tab-cont").removeClass("active"),$(".tabs-content #"+o).addClass("active"),$(".select").removeClass("active"),$(".select#"+n+"-select").addClass("active")}),$(document).on("click",".flexdatalist-results.css li",function(e){var t=$(this),o=t.find(".item-name").text().replace(/\s/g,""),n=t.find(".item-name").next().text().replace(/\s/g,""),s=$(".keyframe-tab.active input[name='"+o+"']");if(s.length)return s.addClass("atention"),s.focus(),void setTimeout(function(){s.removeClass("atention")},1e3);$("<div class='group'> <label for='"+o+"'>"+o+"</label><input value='"+n+"' name='"+o+"'></input></div>").appendTo("#css-props .keyframe-tab.active"),$(".keyframe-tab.active input[name='"+o+"']").focus()}),$(document).on("show:flexdatalist.results",function(){$(".flexdatalist-results.css li").addClass("disabled")}),$(document).on("click",".flexdatalist-results.anim li",function(e){var t={},o=$(this).attr("id");$.getJSON("js/animations.json",function(e){t=e[o],$(".props-block").inputs("setObj",t)})}),$(document).on("click",".anim-zone button.accept",function(e){var t=s.getValue(),o=t.match(/<style>([\s\S]+)<\/style>/)[1],n=t.replace(/<style>([\s\S]+)<\/style>/,"");$("style#custom").length?$("style#custom").text(o):$("<style id='custom'>"+o+"</style>").appendTo("head"),$("#anim-element").empty(),$("#anim-element").append($(n))}),$(document).on("click",".anim-zone button.reset",function(e){s.setValue(a+i),$(".anim-zone button.accept").trigger("click")}),$(document).on("click",".edit-anim-el",function(e){var t=$(".custom-el");t.hasClass("visible")?($(this).removeClass("active"),t.removeClass("visible")):($(this).addClass("active"),t.addClass("visible"))}),"true"!=localStorage.getItem("skipped")&&setTimeout(function(){$(".tips-block").removeClass("hide"),$("body").addClass("fixed")},2e3),$(document).on("click",".tips-block:not(.hide)",function(e){localStorage.setItem("skipped","true"),$(this).closest(".tips-block").addClass("hide"),$("body").removeClass("fixed")}),$(document).on("click",".reg-controls .help",function(e){n(),$(".tips-block").removeClass("hide"),$("body").addClass("fixed")}),$(document).on("click",".change-view",function(e){var t=$("body");t.hasClass("vertical")?(t.removeClass("vertical"),$(".bottom-border.first, .timeline, .bottom-border.second").insertAfter(".main-blocks"),$(".top-border.h-border").insertBefore(".main-blocks")):(t.addClass("vertical"),$(".bottom-border.first, .timeline, .bottom-border.second").insertAfter("body > header"),$(".top-border.h-border").insertAfter(".main-blocks"))}),$(document).on("click",".reg-controls .about",function(e){$(".about-block").removeClass("hide")}),$(document).on("click",".about-block",function(e){$(e.target).is(".about-block .about-wrap")||$(".about-block").addClass("hide")});var d;$(document).on("click",".css-block .export:not(.show-input)",function(e){e.stopPropagation();var t=$(".props-block").inputs("getValue").main.className,o=$(this);o.addClass("show-input"),o.closest(".export").find("input").focus(),o.find("input").val(t+".css")}),$(document).on("blur",".css-block .export input",function(e){$(this).closest(".export")}),$(document).on("click",".css-block .export .export-btn",function(e){e.stopPropagation();var t=$("#editor").editor("getValue"),o=$(this).closest(".export"),n=o.find("input").val();o.removeClass("show-input"),d=new Blob([t],{type:"text/plain;charset=utf-8"}),saveAs(d,n)}),$(document).on("click",".css-block .copy",function(e){var t=$(this).find(".note");t.addClass("visible"),setTimeout(function(){t.removeClass("visible")},2e3);var o=$(".css-block .fantom"),n=$("#editor").editor("getValue");o.val(n),o.select(),document.execCommand("copy")});var r=$("#editor")[0];r.addEventListener("dragover",t,!1),r.addEventListener("drop",e,!1),r.addEventListener("dragleave",o,!1),$("#file")[0].addEventListener("change",e,!1),n()}),$(window).on("load",function(){var e=$("#page-preloader");e.find(".spinner").fadeOut(),e.delay(200).fadeOut("slow")});